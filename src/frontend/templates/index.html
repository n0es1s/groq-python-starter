<!DOCTYPE html>
<html>
  <head>
    <title>Groq Chat Interface</title>
    <link rel="stylesheet" href="/static/css/style.css">
  </head>
  <body>
    <div id="sidebar">
      <h2>Chat Parameters</h2>
      <div class="parameter-group">
        <label for="model">Model:</label>
        <select id="model">
          {% for owner in sorted_owners %}
          <optgroup label="{{ owner }} Models">
            {% for model in models_by_owner[owner] %}
            <option value="{{ model.id }}">{{ model.name }} ({{ model.context_window // 1024 }}K)</option>
            {% endfor %}
          </optgroup>
          {% endfor %}
        </select>
      </div>
      <div class="parameter-group">
        <label for="system_prompt">System Prompt:</label>
        <textarea id="system_prompt" rows="4">You are a helpful AI assistant.</textarea>
      </div>

      <div class="parameter-group">
        <label for="temperature">Temperature:</label>
        <input type="range" id="temperature" min="0" max="2" step="0.1" value="0.7">
        <span id="temperatureValue">0.7</span>
      </div>

      <div class="parameter-group">
        <label for="max_tokens">Max Tokens:</label>
        <input type="number" id="max_tokens" value="1000" min="1" max="4096">
      </div>

      <div class="parameter-group">
        <label for="top_p">Top P:</label>
        <input type="range" id="top_p" min="0" max="1" step="0.1" value="0.7">
        <span id="topPValue">0.7</span>
      </div>

      <div class="parameter-group">
        <label>Options:</label>
        <div>
          <input type="checkbox" id="stream">
          <label for="stream">Stream Response</label>
        </div>
      </div>

      <div class="parameter-group">
        <label for="reasoning_format">Reasoning Format:</label>
        <select id="reasoning_format">
          <option value="parsed">Parsed</option>
          <option value="raw">Raw</option>
          <option value="none">None</option>
        </select>
      </div>
    </div>

    <div class="main-content">
      <div class="chat-header">
        <h1>Groq Chat</h1>
        <button type="button" onclick="clearChat()" class="new-chat-button">New Chat</button>
      </div>
      <div id="chat-container"></div>
      <div class="powered-by">
        <div id="token-stats" class="token-stats hidden">
          <span class="lightning-bolt">âš¡</span>
          <span id="total-tokens">0</span> tokens
          (<span id="tokens-per-second">0</span> tokens/sec)
        </div>
      </div>
      <form id="message-form" onsubmit="sendMessage(event)">
        <input type="text" id="message-input" placeholder="Type your message here..." required>
        <button type="submit">Send</button>
      </form>
      <a href="https://groq.com" target="_blank" rel="noopener noreferrer">
        <img
          src="https://groq.com/wp-content/uploads/2024/03/PBG-mark1-color.svg"
          alt="Powered by Groq for fast inference."
        />
      </a>
    </div>

    <script src="/static/js/script.js"></script>
  </body>
</html>